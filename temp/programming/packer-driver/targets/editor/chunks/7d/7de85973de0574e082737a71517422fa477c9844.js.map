{"version":3,"sources":["file:///Users/dengyaqi/Desktop/CocosProject/cocos-plane-war-master/assets/Scripts/ray/RayTestCtrl.ts"],"names":["_decorator","Component","Vec2","v2","PhysicsSystem2D","ERaycast2DType","ccclass","property","RayTestCtrl","onLoad","instance","enable","start","update","deltaTime","node","setPosition","position","x","y","direct","checkRes","raycast","worldPosition","Closest","length"],"mappings":";;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,E,OAAAA,E;AAAIC,MAAAA,e,OAAAA,e;AAAiBC,MAAAA,c,OAAAA,c;;;;;;;OAC3D;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;6BAGjBQ,W,WADZF,OAAO,CAAC,UAAD,C,UAGHC,QAAQ,CAACL,IAAD,C,2BAHb,MACaM,WADb,SACiCP,SADjC,CAC2C;AAAA;AAAA;;AAAA;AAAA;;AAKvCQ,QAAAA,MAAM,GAAG;AACLL,UAAAA,eAAe,CAACM,QAAhB,CAAyBC,MAAzB,GAAkC,IAAlC;AACH;;AAEDC,QAAAA,KAAK,GAAG,CAEP;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB;AACtB,eAAKC,IAAL,CAAUC,WAAV,CAAsB,KAAKD,IAAL,CAAUE,QAAV,CAAmBC,CAAzC,EAA4C,KAAKH,IAAL,CAAUE,QAAV,CAAmBE,CAAnB,GAAuB,KAAKC,MAAL,CAAYD,CAAZ,GAAgB,GAAhB,GAAsBL,SAAzF;AAEA,gBAAMO,QAAQ,GAAGjB,eAAe,CAACM,QAAhB,CAAyBY,OAAzB,CAAiC,KAAKP,IAAL,CAAUQ,aAA3C,EAA0DpB,EAAE,CAAC,KAAKY,IAAL,CAAUQ,aAAV,CAAwBL,CAAzB,EAA4B,KAAKH,IAAL,CAAUQ,aAAV,CAAwBJ,CAAxB,GAA4B,KAAKC,MAAL,CAAYD,CAAZ,GAAgB,GAAxE,CAA5D,EAA0Id,cAAc,CAACmB,OAAzJ,CAAjB;;AAEA,cAAIH,QAAQ,CAACI,MAAT,GAAkB,CAAtB,EAAyB;AACrB,iBAAKL,MAAL,CAAYD,CAAZ,GAAgB,KAAKC,MAAL,CAAYD,CAAZ,GAAgB,CAAC,CAAjC;AACH;AACJ;;AArBsC,O;;;;;iBAGhBhB,EAAE,CAAC,CAAD,EAAI,CAAJ,C","sourcesContent":["import { _decorator, Component, Node, Vec2, v2, PhysicsSystem2D, ERaycast2DType, EPhysics2DDrawFlags } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('HeroCtrl')\nexport class RayTestCtrl extends Component {\n\n    @property(Vec2)\n    private direct: Vec2 = v2(0, 1);\n\n    onLoad() {\n        PhysicsSystem2D.instance.enable = true;\n    }\n\n    start() {\n\n    }\n\n    update(deltaTime: number) {\n        this.node.setPosition(this.node.position.x, this.node.position.y + this.direct.y * 150 * deltaTime);\n\n        const checkRes = PhysicsSystem2D.instance.raycast(this.node.worldPosition, v2(this.node.worldPosition.x, this.node.worldPosition.y + this.direct.y * 100), ERaycast2DType.Closest);\n\n        if (checkRes.length > 0) {\n            this.direct.y = this.direct.y * -1;\n        }\n    }\n}\n\n"]}